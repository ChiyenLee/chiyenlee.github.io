---
layout: post
title: "Time Stepping Contact and Friction Simulation"
---

<iframe width="560" height="315" src="https://www.youtube.com/embed/weZjwVQXX-o" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

In order to test the controllers I was writing for the quadruped, I wrote a simple time-stepping contact simulator to simulate contact and friction. The big idea here is to solve for contact first, then use the principal of maximum dissipation to solve for friction. For contact events, I reformulated the Linear Complentarity Problems (LCP) that are used to describe contact events into a Quadratic Program (QP) and solve it with an off-the-shelf solver like OSQP. Once the normal forces are solved, we can minimize the overall kinetic energy of the event while subjecting it to the friction cone constraint to solve for friction. The video above shows a simple dropping experiment for a falling cube. The contact points are the eight corners of the cube while the contact surface is the ground. 

<!-- Linear Complementarity Problems (LCP) are often used to model rigid body interaction around contact surfaces. By using a first order semi-implicit discretization of rigid bodies' contact dynamics, we can reformulate these LCPs into Quadratic Programs (QP) that can be solved efficiently for contact forces. Once we found contact forces, we can then find contact coulomb friction forces through principal of maximum dissipation. In this report, we investigated a time-stepping method that solves for contact and friction forces through a two phases process that invovles solving a QP at each phase. By implementing this algorithm for a simulated cube mechanism, we verified the convergence property of the algorithm, showed the effect of friction on energy dissipation, and make empirical observations on the speed of the algorithm. -->